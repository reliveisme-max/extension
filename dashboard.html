<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>BM Commander V6</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>

    <!-- SIDEBAR (MENU TRÁI) -->
    <div class="sidebar">
        <div class="logo">
            <i class="fa-solid fa-shield-cat"></i> BM COMMANDER
        </div>
        <ul class="menu">
            <!-- Tab Quản lý -->
            <li class="active" onclick="switchTab('tab-scan', this)">
                <i class="fa-solid fa-table-columns"></i> Quản lý chung
            </li>
            <!-- Tab Reg BM -->
            <li onclick="switchTab('tab-reg', this)">
                <i class="fa-solid fa-wand-magic-sparkles"></i> Reg BM (Mới)
            </li>
            <!-- Các tính năng tương lai -->
            <li class="disabled">
                <i class="fa-solid fa-sliders"></i> Cấu hình
            </li>
        </ul>
        <div class="footer-info">Dev by AI - Ver 6.0 Final</div>
    </div>

    <!-- MAIN CONTENT (NỘI DUNG PHẢI) -->
    <div class="main-content">
        
        <!-- Header Chung -->
        <div class="top-bar">
            <div id="token-status" class="status-badge">
                <i class="fa-solid fa-circle-notch fa-spin"></i> Loading...
            </div>
            <div class="user-profile">
                <span id="user-name">Unknown</span>
                <div class="avatar"><i class="fa-solid fa-user"></i></div>
            </div>
        </div>

        <!-- === TAB 1: DASHBOARD (SCAN LIST) === -->
        <div id="tab-scan" class="tab-panel active">
            <!-- Thống kê -->
            <div class="stats-grid">
                <div class="card stat-box"><h3>Tổng BM</h3><span id="stat-total">0</span></div>
                <div class="card stat-box success"><h3>Live</h3><span id="stat-live">0</span></div>
                <div class="card stat-box danger"><h3>Die / Policy</h3><span id="stat-die">0</span></div>
                <div class="card stat-box warning"><h3>Admin Ẩn</h3><span id="stat-hidden">0</span></div>
            </div>

            <!-- Toolbar -->
            <div class="action-bar card">
                <div class="left-actions">
                    <button id="btn-scan" class="btn btn-primary"><i class="fa-solid fa-rotate"></i> Quét lại</button>
                    <div class="search-wrapper">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <input type="text" id="search-input" placeholder="Tìm ID hoặc Tên BM...">
                    </div>
                </div>
                <!-- Bulk Actions -->
                <div class="right-actions" id="bulk-actions" style="opacity: 0.5; pointer-events: none;">
                    <span style="font-size: 12px; color: #aaa; margin-right: 10px;">Đã chọn: <b id="selected-count">0</b></span>
                    <button id="btn-bulk-leave" class="btn btn-danger btn-sm">
                        <i class="fa-solid fa-right-from-bracket"></i> Rời BM
                    </button>
                </div>
            </div>

            <!-- Bảng Dữ Liệu -->
            <div class="table-container">
                <table id="bm-table">
                    <thead>
                        <tr>
                            <th width="40" class="center"><input type="checkbox" id="check-all"></th>
                            <th width="30%">BM Info</th>
                            <th width="15%">Trạng thái</th>
                            <th width="15%">Tài sản</th>
                            <th width="15%">Admin</th>
                            <th width="25%" class="center">Hành động</th>
                        </tr>
                    </thead>
                    <tbody><!-- JS Render --></tbody>
                </table>
            </div>
        </div>

        <!-- === TAB 2: REG BM (GIAO DIỆN MỚI) === -->
        <div id="tab-reg" class="tab-panel">
            <div style="display: flex; gap: 20px; height: 100%;">
                
                <!-- Cột 1: Form Cấu Hình -->
                <div class="card" style="flex: 1; padding: 25px; overflow-y: auto;">
                    <h3 style="margin-top:0; color:var(--primary); display:flex; justify-content:space-between; align-items:center;">
                        <span><i class="fa-solid fa-sliders"></i> Cấu hình Reg</span>
                        <span id="limit-info" class="badge badge-die" style="font-size:11px;">Check Limit...</span>
                    </h3>
                    
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label class="form-label">Tên BM Gốc:</label>
                        <input type="text" id="reg-name" value="BM Agency" class="modal-input" placeholder="VD: Ads Pro...">
                    </div>

                    <div class="form-group" style="margin-bottom: 15px;">
                        <label class="form-label">Số lượng muốn tạo:</label>
                        <input type="number" id="reg-qty" value="1" min="1" max="10" class="modal-input" placeholder="Nhập số lượng...">
                        <small style="color:#6b7280; font-size:11px;">* Tối đa phụ thuộc vào Limit của Via.</small>
                    </div>

                    <div class="form-group" style="margin-bottom: 15px;">
                        <label class="form-label">Mời Email (Tùy chọn):</label>
                        <input type="text" id="reg-email" class="modal-input" placeholder="Nhập email nếu muốn mời ngay...">
                        <small style="color:#6b7280; font-size:11px;">* Bỏ trống nếu không cần mời.</small>
                    </div>

                    <div class="form-group divider">
                        <label class="form-label warning"><i class="fa-solid fa-shield-halved"></i> Chống Spam:</label>
                        <label class="chk-label"><input type="checkbox" id="reg-random-name" checked> Random tên (+ Hậu tố)</label>
                        <label class="chk-label"><input type="checkbox" id="reg-delay" checked> Delay ngẫu nhiên (30s-60s)</label>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Thông tin (Trust):</label>
                        <select id="reg-timezone" class="modal-input" style="margin-bottom:10px;">
                            <option value="Asia/Ho_Chi_Minh">GMT+7 (Vietnam)</option>
                            <option value="America/Los_Angeles">GMT-7 (US Pacific)</option>
                        </select>
                        <select id="reg-currency" class="modal-input">
                            <option value="VND">VND (Việt Nam Đồng)</option>
                            <option value="USD">USD (Đô la Mỹ)</option>
                        </select>
                    </div>

                    <button id="btn-start-reg" class="btn btn-primary full-width">
                        <i class="fa-solid fa-play"></i> BẮT ĐẦU REG
                    </button>
                </div>

                <!-- Cột 2: Logs Console -->
                <div class="card" style="flex: 1.5; padding: 25px; display:flex; flex-direction:column;">
                    <h3 style="margin-top:0;"><i class="fa-solid fa-terminal"></i> Nhật ký hoạt động</h3>
                    <div id="reg-logs" class="console-log">
                        <div>> Sẵn sàng...</div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- MODAL ĐỔI TÊN -->
    <div id="rename-modal" class="modal">
        <div class="modal-content">
            <h3>Đổi tên BM</h3>
            <p id="modal-bm-id">ID: ...</p>
            <input type="text" id="new-bm-name" class="modal-input">
            <div class="modal-actions">
                <button id="btn-cancel-rename" class="btn btn-secondary">Hủy</button>
                <button id="btn-confirm-rename" class="btn btn-primary">Lưu</button>
            </div>
        </div>
    </div>

    <!-- JS FILES -->
    <script src="js/core.js"></script>
    <script src="js/tab_scan.js"></script>
    <script src="js/tab_action.js"></script>
    <script src="js/tab_reg.js"></script>
    <script src="js/main.js"></script>

</body>
</html>